[tox]
envlist = py313, py312, py311, py310
isolated_build = false
skip_missing_interpreters = true

[testenv]
deps = 
    pytest>=8.0.0
    pydantic>=2.0.0
    pyyaml>=6.0.0
    colorama>=0.4.0

setenv = 
    PYTHONPATH = {toxinidir}

commands = 
    pytest tests -v

[testenv:all-tests]
setenv = 
    PYTHONPATH = {toxinidir}
commands = 
    pytest tests/ -v

[testenv:lint]
deps = 
    {[testenv]deps}
    flake8
    black
    mypy
setenv = 
    PYTHONPATH = {toxinidir}
commands = 
    flake8 students_folder/ tests/
    black --check students_folder/ tests/
    mypy students_folder/ tests/ --ignore-missing-imports

[testenv:format]
deps = 
    black
    isort
setenv = 
    PYTHONPATH = {toxinidir}
commands = 
    black students_folder/ tests/
    isort students_folder/ tests/

[flake8]
max-line-length = 88
extend-ignore = E203, W503
exclude = venv/, .tox/, __pycache__/

# pytest configuration moved to pyproject.toml

[testenv:zmv_lab1]
description = run zmv_lab_1
setenv =
    PYTHONPATH = {toxinidir}
commands =
    pytest -m zmv_lab1 --tb=short
